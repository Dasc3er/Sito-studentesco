!function(e,a){"use strict";var i,t,n,s="._tap",r="._tapActive",o="tap",c="clientX clientY screenX screenY pageX pageY".split(" "),d={count:0,event:0},l=function(e,i){var t=i.originalEvent,n=a.Event(t);n.type=e;for(var s=0,r=c.length;r>s;s++)n[c[s]]=i[c[s]];return n},p=function(e){if(e.isTrigger)return!1;var i=d.event,t=Math.abs(e.pageX-i.pageX),n=Math.abs(e.pageY-i.pageY),s=Math.max(t,n);return e.timeStamp-i.timeStamp<a.tap.TIME_DELTA&&s<a.tap.POSITION_DELTA&&(!i.touches||1===d.count)&&h.isTracking},f=function(e){if(!n)return!1;var i=Math.abs(e.pageX-n.pageX),t=Math.abs(e.pageY-n.pageY),s=Math.max(i,t);return Math.abs(e.timeStamp-n.timeStamp)<750&&s<a.tap.POSITION_DELTA},u=function(e){if(0===e.type.indexOf("touch")){e.touches=e.originalEvent.changedTouches;for(var a=e.touches[0],i=0,t=c.length;t>i;i++)e[c[i]]=a[c[i]]}e.timeStamp=Date.now?Date.now():+new Date},h={isEnabled:!1,isTracking:!1,enable:function(){h.isEnabled||(h.isEnabled=!0,i=a(e.body).on("touchstart"+s,h.onStart).on("mousedown"+s,h.onStart).on("click"+s,h.onClick))},disable:function(){h.isEnabled&&(h.isEnabled=!1,i.off(s))},onStart:function(e){e.isTrigger||(u(e),(!a.tap.LEFT_BUTTON_ONLY||e.touches||1===e.which)&&(e.touches&&(d.count=e.touches.length),h.isTracking||(e.touches||!f(e))&&(h.isTracking=!0,d.event=e,e.touches?(n=e,i.on("touchend"+s+r,h.onEnd).on("touchcancel"+s+r,h.onCancel)):i.on("mouseup"+s+r,h.onEnd))))},onEnd:function(e){var i;e.isTrigger||(u(e),p(e)&&(i=l(o,e),t=i,a(d.event.target).trigger(i)),h.onCancel(e))},onCancel:function(e){e&&"touchcancel"===e.type&&e.preventDefault(),h.isTracking=!1,i.off(r)},onClick:function(e){return!e.isTrigger&&t&&t.isDefaultPrevented()&&t.target===e.target&&t.pageX===e.pageX&&t.pageY===e.pageY&&e.timeStamp-t.timeStamp<750?(t=null,!1):void 0}};a(e).ready(h.enable),a.tap={POSITION_DELTA:10,TIME_DELTA:400,LEFT_BUTTON_ONLY:!0}}(document,jQuery),$(document).ready(function(){function e(e,a,t){var n=a.row(e),s=t.row.add(n.data()).draw().node();return n.remove().draw(),i(),s}function a(e){return"undefined"==typeof e}function i(){0===l.data().length&&0===p.data().length&&0===f.data().length?$("#iscrizioni").addClass("hidden"):$("#iscrizioni").removeClass("hidden")}$(".page-wrap").css("margin-bottom",-$(".footer").height()),$("<style>.page-wrap:after{height:"+$(".footer").height()+"px}</style>").appendTo("head");var t="/edsa-Autogestione",n={bLengthChange:!1,paging:!0,ordering:!0,info:!0,responsive:!0,language:{decimal:",",zeroRecords:"Nessun risultato :(",info:"Pagina _PAGE_ di _PAGES_",infoEmpty:"",infoFiltered:"",emptyTable:"Nessun risultato :(",infoPostFix:"",thousands:".",loadingRecords:"Caricamento...",processing:"Elaborazione...",search:"Ricerca:",paginate:{first:"Prima",last:"Ultima",next:"Successivo",previous:"Precedente"},aria:{sortAscending:"Ordinamento alfabetico",sortDescending:"Ordinamento inverso"}},order:[1,"desc"],columns:[null,{visible:!1},{visible:!1},{visible:!1}]},s={bLengthChange:!1,bFilter:!1,paging:!1,ordering:!0,info:!1,language:{emptyTable:"Nessun risultato :("},responsive:!0,columns:[null,{visible:!1},{visible:!1},{visible:!1}]},r=$("#iscritto").DataTable(n),o=$("#good").DataTable(n),c=$("#blocked").DataTable(n),d=$("#to").DataTable(n),l=$("#primo").DataTable(s),p=$("#secondo").DataTable(s),f=$("#terzo").DataTable(s),u=$("#first").DataTable(n),h=$("#second").DataTable(n),v=$("#third").DataTable(n),m="primo turno",b="secondo turno",g="giornata intera (torneo)";$(".scroll").DataTable({paging:!0,ordering:!0,info:!0,responsive:!0,language:{decimal:",",lengthMenu:"_MENU_ risultati per pagina",zeroRecords:"Nessun risultato :(",info:"_TOTAL_ risultati",infoEmpty:"",infoFiltered:"(filtrato da _MAX_ risultati totali)",emptyTable:"Nessun risultato :(",infoPostFix:"",thousands:".",loadingRecords:"Caricamento...",processing:"Elaborazione...",search:"Ricerca:",paginate:{first:"Prima",last:"Ultima",next:"Successivo",previous:"Precedente"},aria:{sortAscending:"Ordinamento alfabetico",sortDescending:"Ordinamento inverso"}},scrollY:400,scrollCollapse:!0,paging:!1}),$(document).on("tap","#professore",function(){$(this).parent().parent().find(".active").removeClass("active"),$(this).parent().addClass("active");var e=$(this).find("#nome").text(),a=".";e&&"Tutti i professori"!=e?(a="^\\s*"+$(this).find("#nome").text()+"\\s*$",$("#who").text("di "+$(this).find("#nome").text())):$("#who").text(""),d.columns(2).search(a,!0).draw(),o.columns(2).search(a,!0).draw(),c.columns(2).search(a,!0).draw()}),$(document).on("tap","#sort",function(){$(this).parent().parent().find(".active").removeClass("active"),$(this).parent().addClass("active");var e,a=$(this).find("#val").text().toLowerCase();e="1"==a?[1,"asc"]:"1d"==a?[1,"desc"]:"2"==a?[2,"asc"]:"2d"==a?[2,"desc"]:"3"==a?[3,"asc"]:"3d"==a?[3,"desc"]:[0,"asc"],r.order(e).draw(),o.order(e).draw(),c.order(e).draw(),d.order(e).draw(),l.order(e).draw(),p.order(e).draw(),f.order(e).draw(),u.order(e).draw(),h.order(e).draw(),v.order(e).draw()}),$(document).on("tap","#reset",function(){var e=$(this);e.html('<i class="fa fa-circle-o-notch fa-spin"></i>'),$.ajax({method:"GET",url:t+"/utenti/reset/"+e.parent().find("#value").text(),data:{ajax:!0}}).done(function(a){e.parent().html(a)})}),$(document).on("tap","#presenza",function(){var e=$(this);e.html('<i class="fa fa-circle-o-notch fa-spin"></i>'),e.removeClass("btn-success"),e.removeClass("btn-danger"),e.addClass("btn-info"),$.ajax({method:"GET",url:t+"presente/"+e.parent().find("#persona").text()+"/"+$("#value").text(),data:{ajax:!0}}).done(function(a){1==a?(e.addClass("btn-danger"),e.removeClass("btn-info"),e.parent().parent().find("#pres").html("Attualmente presente"),e.html("Assente")):0==a&&(e.removeClass("btn-info"),e.addClass("btn-success"),e.parent().parent().find("#pres").html("Attualmente assente"),e.html("Presente"))})}),$(document).on("tap","#like",function(){var e=$(this),a=$(this).parent().parent().parent();e.find("#text").html('<i class="fa fa-circle-o-notch fa-spin"></i>'),e.removeClass("btn-success").removeClass("btn-danger").addClass("btn-info disabled");var i=t+"/";"proposte"==$("#page").text().toLowerCase()?i+="proposte":"citazioni"==$("#page").text().toLowerCase()&&(i+="citazioni"),i+="/"+a.find("#value").text(),$.ajax({method:"GET",url:i,data:{ajax:!0}}).done(function(i){1==i?(e.removeClass("btn-info disabled").addClass("btn-danger").find("#text").html('<i class="fa fa-thumbs-o-up"></i>'),a.parent().parent().find("#cont").text(parseInt(e.parent().find("#cont").text())+1)):0==i&&(e.removeClass("btn-info disabled").addClass("btn-success").find("#text").html('<i class="fa fa-thumbs-o-up"></i>'),a.parent().parent().find("#cont").text(parseInt(e.parent().find("#cont").text())-1))})}),i(),$(document).on("tap","#iscriviti",function(){var i=$(this),n=$(this).parent().parent().parent().parent().parent(),s=n.find("#orario").text().toLowerCase();i.removeClass("btn-success").removeClass("btn-danger").addClass("btn-info disabled").html('<i class="fa fa-circle-o-notch fa-spin"></i>');var c=t+"/";"corsi"==$("#page").text().toLowerCase()?c+="corsi":"aula"==$("#page").text().toLowerCase()&&(c+="aule"),c+="/"+n.find("#value").text(),$.ajax({method:"GET",url:c,data:{ajax:!0}}).done(function(i){var t;1==i?(s&&"corsi"==$("#page").text().toLowerCase()?(s==m?(t=e(n,u,l),$("#first").find("#iscriviti").parent().remove(),$("#third").find("#iscriviti").parent().remove()):s==b?(t=e(n,h,p),$("#second").find("#iscriviti").parent().remove(),$("#third").find("#iscriviti").parent().remove()):s==g?(t=e(n,v,f),$(t).find(".links").append('<li><a id="sqaud" href=indirizzo + "/squadra" class="btn btn-primary btn-lg">Crea squadra</a></li>'),$("#first").find("#iscriviti").parent().remove(),$("#second").find("#iscriviti").parent().remove(),$("#third").find("#iscriviti").parent().remove()):t=e(n,o,sub),$(t).find("#orario").parent().parent().removeClass("hidden")):s==g&&$(t).find(".links").append('<li><a id="sqaud" href=indirizzo + "/squadra" class="btn btn-primary btn-lg">Crea squadra</a></li>'),a($(t).find("#iscriviti").html())?$(t).find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-close"> Elimina iscrizione</a></li>'):$(t).find("#iscriviti").removeClass("btn-success").addClass("btn-danger").html('<i class="fa fa-close"></i> Elimina iscrizione'),$(t).find("#number").text(parseInt(n.find("#number").text())+1),$(t).find("#stato").removeClass("btn-success").addClass("btn-warning").html('<i class="fa fa-eye-slash"></i> Blocca')):0==i&&(s&&"corsi"==$("#page").text().toLowerCase()&&(s==m?($("#first").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"></i> Iscriviti</a></li></li>'),0===p.data().length&&$("#third").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"></i> Iscriviti</a></li>'),t=e(n,l,u)):s==b?($("#second").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"></i> Iscriviti</a></li>'),0===l.data().length&&$("#third").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"></i> Iscriviti</a></li>'),t=e(n,p,h)):s==g?($("#first").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"></i> Iscriviti</a></li>'),$("#second").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"></i> Iscriviti</a></li>'),$("#third").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"></i> Iscriviti</a></li>'),t=e(n,f,v)):t=e(n,r,o),$(t).find("#orario").parent().parent().addClass("hidden")),a($(t).find("#iscriviti").html())?$(t).find(".links").prepend('<li><a id="iscriviti" class="btn btn-danger"><i class="fa fa-check"></i> Iscriviti</a></li>'):$(t).find("#iscriviti").removeClass("btn-danger").addClass("btn-success").html('<i class="fa fa-check"></i> Iscriviti'),$(t).find("#number").text(parseInt(n.find("#number").text())-1),$(t).find("#squad").parent().remove(),$(t).find("#stato").removeClass("btn-success").addClass("btn-warning").html('<i class="fa fa-eye-slash"></i> Blocca')),$(t).find(".progress-bar").attr("aria-valuenow",100*parseInt(n.find("#number").text())/parseInt(n.find("#max").text())),$(t).find(".progress-bar").css("width",100*parseInt(n.find("#number").text())/parseInt(n.find("#max").text())+"%")})}),$(document).on("tap","#stato",function(){var i=$(this),n=$(this).parent().parent().parent().parent().parent(),s=n.find("#orario").text().toLowerCase();i.removeClass("btn-success").removeClass("btn-warning").addClass("btn-info disabled").html('<i class="fa fa-circle-o-notch fa-spin"></i>');var r=t+"/cambia/";"corsi"==$("#page").text().toLowerCase()?r+="corso":"proposte"==$("#page").text().toLowerCase()?r+="proposta":"aula"==$("#page").text().toLowerCase()?r+="aula":"citazioni"==$("#page").text().toLowerCase()?r+="citazione":"tipologie"==$("#page").text().toLowerCase()?r+="tipo":"categorie"==$("#page").text().toLowerCase()?r+="categoria":"articoli"==$("#page").text().toLowerCase()?r+="articolo":"post"==$("#page").text().toLowerCase()&&(r+="post"),r+="/"+n.find("#value").text(),$.ajax({method:"GET",url:r,data:{ajax:!0}}).done(function(i){var t;1==i?(s?(s==m?n.find("#orario").parent().parent().hasClass("hidden")?t=e(n,u,c):($("#first").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"> Iscriviti</a></li>'),0===p.data().length&&$("#third").find("section").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"> Iscriviti</a></li>'),t=e(n,l,c)):s==b?n.find("#orario").parent().parent().hasClass("hidden")?t=e(n,h,c):($("#second").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"> Iscriviti</a></li>'),0===l.data().length&&$("#third").find("section").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"> Iscriviti</a></li>'),t=e(n,p,c)):s==g&&(n.find("#orario").parent().parent().hasClass("hidden")?t=e(n,v,c):($("#first").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"> Iscriviti</a></li>'),$("#second").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"> Iscriviti</a></li>'),$("#third").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"> Iscriviti</a></li>'),t=e(n,f,c))),$(t).find("#orario").parent().parent().removeClass("hidden")):t=e(n,o,c),$(t).find("#stato").removeClass("btn-warning").addClass("btn-success").html('<i class="fa fa-eye"></i> Abilita'),$(t).find("#squad").parent().remove(),$(t).find("#like").parent().remove(),$(t).find(".level").remove(),$(t).find("#iscriviti").parent().remove()):0==i&&(s?(s==m?t=e(n,c,u):s==b?t=e(n,c,h):s==g&&(t=e(n,c,v)),$(t).find("#orario").parent().parent().addClass("hidden"),s=$(t).find("#orario").text().toLowerCase(),$(t).find("section").not(".yellow")&&(s==m&&0===l.data().length&&0===f.data().length||s==b&&0===p.data().length&&0===f.data().length||s==g&&0===l.data().length&&0===p.data().length&&0===f.data().length?a($(t).find("#iscriviti").html())?$(t).find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"> Iscriviti</a></li>'):$(t).find("#iscriviti").removeClass("btn-danger").addClass("btn-success").html('<i class="fa fa-check"></i> Iscriviti'):$(t).find("#iscriviti")&&$(t).find("#iscriviti").parent().remove())):(t="to"==n.parent().parent().attr("id")?e(n,d,o):e(n,c,o),"post"!=$("#page").text().toLowerCase()&&"articoli"!=$("#page").text().toLowerCase()&&"categorie"!=$("#page").text().toLowerCase()&&"tipologie"!=$("#page").text().toLowerCase()&&a($(t).find("#like").html())&&$(t).find(".links").prepend('<li><a id="like" class="btn btn-success"><span id="text"><i class="fa fa-thumbs-o-up"></i></span> <span id="cont">0</span></a></li>')),$(t).find("#stato").removeClass("btn-success").addClass("btn-warning").html('<i class="fa fa-eye-slash"></i> Blocca'),$(t).find("#dis").remove()),$(t).find("#cambia").parent().remove()})}),$(document).on("tap","#cambia",function(){var a=$(this),i=a.parent().parent().parent().parent().parent();a.html('<i class="fa fa-circle-o-notch fa-spin"></i>').addClass("disabled");var n=t+"/rifiuta/";"proposte"==$("#page").text().toLowerCase()?n+="proposta":"aula"==$("#page").text().toLowerCase()?n+="aula":"citazioni"==$("#page").text().toLowerCase()&&(n+="citazione"),n+="/"+i.find("#value").text(),$.ajax({method:"GET",url:n,data:{ajax:!0}}),$.ajax({method:"POST",url:t+"/templates/ajax/cambia.php",data:{id:a.parent().parent().parent().find("#value").text(),page:$("#page").text()}}).done(function(a){var t=e(i,d,c);$(t).find("#cambia").parent().remove(),$("#change").text(parseInt($("#change").text())-1)})})});