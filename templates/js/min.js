!function(i,a){"use strict";var e,t,n,s="._tap",r="._tapActive",c="tap",o="clientX clientY screenX screenY pageX pageY".split(" "),d={count:0,event:0},l=function(i,e){var t=e.originalEvent,n=a.Event(t);n.type=i;for(var s=0,r=o.length;r>s;s++)n[o[s]]=e[o[s]];return n},f=function(i){if(i.isTrigger)return!1;var e=d.event,t=Math.abs(i.pageX-e.pageX),n=Math.abs(i.pageY-e.pageY),s=Math.max(t,n);return i.timeStamp-e.timeStamp<a.tap.TIME_DELTA&&s<a.tap.POSITION_DELTA&&(!e.touches||1===d.count)&&h.isTracking},p=function(i){if(!n)return!1;var e=Math.abs(i.pageX-n.pageX),t=Math.abs(i.pageY-n.pageY),s=Math.max(e,t);return Math.abs(i.timeStamp-n.timeStamp)<750&&s<a.tap.POSITION_DELTA},u=function(i){if(0===i.type.indexOf("touch")){i.touches=i.originalEvent.changedTouches;for(var a=i.touches[0],e=0,t=o.length;t>e;e++)i[o[e]]=a[o[e]]}i.timeStamp=Date.now?Date.now():+new Date},h={isEnabled:!1,isTracking:!1,enable:function(){h.isEnabled||(h.isEnabled=!0,e=a(i.body).on("touchstart"+s,h.onStart).on("mousedown"+s,h.onStart).on("click"+s,h.onClick))},disable:function(){h.isEnabled&&(h.isEnabled=!1,e.off(s))},onStart:function(i){i.isTrigger||(u(i),(!a.tap.LEFT_BUTTON_ONLY||i.touches||1===i.which)&&(i.touches&&(d.count=i.touches.length),h.isTracking||(i.touches||!p(i))&&(h.isTracking=!0,d.event=i,i.touches?(n=i,e.on("touchend"+s+r,h.onEnd).on("touchcancel"+s+r,h.onCancel)):e.on("mouseup"+s+r,h.onEnd))))},onEnd:function(i){var e;i.isTrigger||(u(i),f(i)&&(e=l(c,i),t=e,a(d.event.target).trigger(e)),h.onCancel(i))},onCancel:function(i){i&&"touchcancel"===i.type&&i.preventDefault(),h.isTracking=!1,e.off(r)},onClick:function(i){return!i.isTrigger&&t&&t.isDefaultPrevented()&&t.target===i.target&&t.pageX===i.pageX&&t.pageY===i.pageY&&i.timeStamp-t.timeStamp<750?(t=null,!1):void 0}};a(i).ready(h.enable),a.tap={POSITION_DELTA:10,TIME_DELTA:400,LEFT_BUTTON_ONLY:!0}}(document,jQuery),$(document).ready(function(){function i(i,a,t){var n=a.row(i),s=t.row.add(n.data()).draw().node();return n.remove().draw(),e(),s}function a(i){return"undefined"==typeof i}function e(){0===l.data().length&&0===f.data().length&&0===p.data().length?$("#iscrizioni").addClass("hidden"):$("#iscrizioni").removeClass("hidden")}$(".page-wrap").css("margin-bottom",-$(".footer").height()),$("<style>.page-wrap:after{height:"+$(".footer").height()+"px}</style>").appendTo("head");var t="",n={bLengthChange:!1,paging:!0,ordering:!0,info:!0,responsive:!0,language:{decimal:",",zeroRecords:"Nessun risultato :(",info:"Pagina _PAGE_ di _PAGES_",infoEmpty:"",infoFiltered:"",emptyTable:"Nessun risultato :(",infoPostFix:"",thousands:".",loadingRecords:"Caricamento...",processing:"Elaborazione...",search:"Ricerca:",paginate:{first:"Prima",last:"Ultima",next:"Successivo",previous:"Precedente"},aria:{sortAscending:"Ordinamento alfabetico",sortDescending:"Ordinamento inverso"}},order:[1,"desc"],columns:[null,{visible:!1},{visible:!1},{visible:!1}]},s={bLengthChange:!1,bFilter:!1,paging:!1,ordering:!0,info:!1,language:{emptyTable:"Nessun risultato :("},responsive:!0,columns:[null,{visible:!1},{visible:!1},{visible:!1}]},r=$("#iscritto").DataTable(n),c=$("#good").DataTable(n),o=$("#blocked").DataTable(n),d=$("#to").DataTable(n),l=$("#primo").DataTable(s),f=$("#secondo").DataTable(s),p=$("#terzo").DataTable(s),u=$("#first").DataTable(n),h=$("#second").DataTable(n),m=$("#third").DataTable(n),v="primo turno",b="secondo turno",g="giornata intera (torneo)";$(".scroll").DataTable({paging:!0,ordering:!0,info:!0,responsive:!0,language:{decimal:",",lengthMenu:"_MENU_ risultati per pagina",zeroRecords:"Nessun risultato :(",info:"_TOTAL_ risultati",infoEmpty:"",infoFiltered:"(filtrato da _MAX_ risultati totali)",emptyTable:"Nessun risultato :(",infoPostFix:"",thousands:".",loadingRecords:"Caricamento...",processing:"Elaborazione...",search:"Ricerca:",paginate:{first:"Prima",last:"Ultima",next:"Successivo",previous:"Precedente"},aria:{sortAscending:"Ordinamento alfabetico",sortDescending:"Ordinamento inverso"}},scrollY:400,scrollCollapse:!0,paging:!1}),$(document).on("tap","#professore",function(){$(this).parent().parent().find(".active").removeClass("active"),$(this).parent().addClass("active");var i=$(this).find("#nome").text(),a=".";i&&"Tutti i professori"!=i?(a="^\\s*"+$(this).find("#nome").text()+"\\s*$",$("#who").text("di "+$(this).find("#nome").text())):$("#who").text(""),d.columns(2).search(a,!0).draw(),c.columns(2).search(a,!0).draw(),o.columns(2).search(a,!0).draw()}),$(document).on("tap","#sort",function(){$(this).parent().parent().find(".active").removeClass("active"),$(this).parent().addClass("active");var i,a=$(this).find("#val").text().toLowerCase();i="1"==a?[1,"asc"]:"1d"==a?[1,"desc"]:"2"==a?[2,"asc"]:"2d"==a?[2,"desc"]:"3"==a?[3,"asc"]:"3d"==a?[3,"desc"]:[0,"asc"],r.order(i).draw(),c.order(i).draw(),o.order(i).draw(),d.order(i).draw(),l.order(i).draw(),f.order(i).draw(),p.order(i).draw(),u.order(i).draw(),h.order(i).draw(),m.order(i).draw()}),$(document).on("tap","#reset",function(){var i=$(this);i.html('<i class="fa fa-circle-o-notch fa-spin"></i>'),$.ajax({method:"POST",url:t+"/templates/ajax/reset.php",data:{id:i.parent().find("#value").text()}}).done(function(a){i.parent().html(a)})}),$(document).on("tap","#presenza",function(){var i=$(this);i.html('<i class="fa fa-circle-o-notch fa-spin"></i>'),i.removeClass("btn-success"),i.removeClass("btn-danger"),i.addClass("btn-info"),$.ajax({method:"POST",url:t+"/templates/ajax/presente.php",data:{id:i.parent().find("#persona").text(),corso:$("#value").text()}}).done(function(a){1==a?(i.addClass("btn-danger"),i.removeClass("btn-info"),i.parent().parent().find("#pres").html("Attualmente presente"),i.html("Assente")):0==a&&(i.removeClass("btn-info"),i.addClass("btn-success"),i.parent().parent().find("#pres").html("Attualmente assente"),i.html("Presente"))})}),$(document).on("tap","#like",function(){var i=$(this),a=$(this).parent().parent().parent();i.find("#text").html('<i class="fa fa-circle-o-notch fa-spin"></i>'),i.removeClass("btn-success").removeClass("btn-danger").addClass("btn-info disabled"),$.ajax({method:"POST",url:t+"/templates/ajax/like.php",data:{id:a.find("#value").text(),page:$("#page").text()}}).done(function(e){1==e?(i.removeClass("btn-info disabled").addClass("btn-danger").find("#text").html('<i class="fa fa-thumbs-o-up"></i>'),a.parent().parent().find("#cont").text(parseInt(i.parent().find("#cont").text())+1)):0==e&&(i.removeClass("btn-info disabled").addClass("btn-success").find("#text").html('<i class="fa fa-thumbs-o-up"></i>'),a.parent().parent().find("#cont").text(parseInt(i.parent().find("#cont").text())-1))})}),e(),$(document).on("tap","#iscriviti",function(){var e=$(this),n=$(this).parent().parent().parent().parent().parent(),s=n.find("#orario").text().toLowerCase();e.removeClass("btn-success").removeClass("btn-danger").addClass("btn-info disabled").html('<i class="fa fa-circle-o-notch fa-spin"></i>'),$.ajax({method:"POST",url:t+"/templates/ajax/iscriviti.php",data:{id:n.find("#value").text(),page:$("#page").text()}}).done(function(e){var t;1==e?(s&&"corsi"==$("#page").text().toLowerCase()?(s==v?(t=i(n,u,l),$("#first").find("#iscriviti").parent().remove(),$("#third").find("#iscriviti").parent().remove()):s==b?(t=i(n,h,f),$("#second").find("#iscriviti").parent().remove(),$("#third").find("#iscriviti").parent().remove()):s==g?(t=i(n,m,p),$(t).find(".links").append('<li><a id="sqaud" href="/edsa-Autogestione/squadra" class="btn btn-primary btn-lg">Crea squadra</a></li>'),$("#first").find("#iscriviti").parent().remove(),$("#second").find("#iscriviti").parent().remove(),$("#third").find("#iscriviti").parent().remove()):t=i(n,c,sub),$(t).find("#orario").parent().parent().removeClass("hidden")):s==g&&$(t).find(".links").append('<li><a id="sqaud" href="/edsa-Autogestione/squadra" class="btn btn-primary btn-lg">Crea squadra</a></li>'),a($(t).find("#iscriviti").html())?$(t).find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-close"> Elimina iscrizione</a></li>'):$(t).find("#iscriviti").removeClass("btn-success").addClass("btn-danger").html('<i class="fa fa-close"></i> Elimina iscrizione'),$(t).find("#number").text(parseInt(n.find("#number").text())+1),$(t).find("#stato").removeClass("btn-success").addClass("btn-warning").html('<i class="fa fa-eye-slash"></i> Blocca')):0==e&&(s&&"corsi"==$("#page").text().toLowerCase()&&(s==v?($("#first").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"></i> Iscriviti</a></li></li>'),0===f.data().length&&$("#third").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"></i> Iscriviti</a></li>'),t=i(n,l,u)):s==b?($("#second").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"></i> Iscriviti</a></li>'),0===l.data().length&&$("#third").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"></i> Iscriviti</a></li>'),t=i(n,f,h)):s==g?($("#first").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"></i> Iscriviti</a></li>'),$("#second").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"></i> Iscriviti</a></li>'),$("#third").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"></i> Iscriviti</a></li>'),t=i(n,p,m)):t=i(n,r,c),$(t).find("#orario").parent().parent().addClass("hidden")),a($(t).find("#iscriviti").html())?$(t).find(".links").prepend('<li><a id="iscriviti" class="btn btn-danger"><i class="fa fa-check"></i> Iscriviti</a></li>'):$(t).find("#iscriviti").removeClass("btn-danger").addClass("btn-success").html('<i class="fa fa-check"></i> Iscriviti'),$(t).find("#number").text(parseInt(n.find("#number").text())-1),$(t).find("#squad").parent().remove(),$(t).find("#stato").removeClass("btn-success").addClass("btn-warning").html('<i class="fa fa-eye-slash"></i> Blocca')),$(t).find(".progress-bar").attr("aria-valuenow",100*parseInt(n.find("#number").text())/parseInt(n.find("#max").text())),$(t).find(".progress-bar").css("width",100*parseInt(n.find("#number").text())/parseInt(n.find("#max").text())+"%")})}),$(document).on("tap","#stato",function(){var e=$(this),n=$(this).parent().parent().parent().parent().parent(),s=n.find("#orario").text().toLowerCase();e.removeClass("btn-success").removeClass("btn-warning").addClass("btn-info disabled").html('<i class="fa fa-circle-o-notch fa-spin"></i>'),$.ajax({method:"POST",url:t+"/templates/ajax/stato.php",data:{id:n.find("#value").text(),page:$("#page").text()}}).done(function(e){var t;1==e?(s?(s==v?n.find("#orario").parent().parent().hasClass("hidden")?t=i(n,u,o):($("#first").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"> Iscriviti</a></li>'),0===f.data().length&&$("#third").find("section").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"> Iscriviti</a></li>'),t=i(n,l,o)):s==b?n.find("#orario").parent().parent().hasClass("hidden")?t=i(n,h,o):($("#second").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"> Iscriviti</a></li>'),0===l.data().length&&$("#third").find("section").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"> Iscriviti</a></li>'),t=i(n,f,o)):s==g&&(n.find("#orario").parent().parent().hasClass("hidden")?t=i(n,m,o):($("#first").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"> Iscriviti</a></li>'),$("#second").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"> Iscriviti</a></li>'),$("#third").find("section").not(".yellow").find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"> Iscriviti</a></li>'),t=i(n,p,o))),$(t).find("#orario").parent().parent().removeClass("hidden")):t=i(n,c,o),$(t).find("#stato").removeClass("btn-warning").addClass("btn-success").html('<i class="fa fa-eye"></i> Abilita'),$(t).find("#squad").parent().remove(),$(t).find("#like").parent().remove(),$(t).find(".level").remove(),$(t).find("#iscriviti").parent().remove()):0==e&&(s?(s==v?t=i(n,o,u):s==b?t=i(n,o,h):s==g&&(t=i(n,o,m)),$(t).find("#orario").parent().parent().addClass("hidden"),s=$(t).find("#orario").text().toLowerCase(),$(t).find("section").not(".yellow")&&(s==v&&0===l.data().length&&0===p.data().length||s==b&&0===f.data().length&&0===p.data().length||s==g&&0===l.data().length&&0===f.data().length&&0===p.data().length?a($(t).find("#iscriviti").html())?$(t).find(".links").prepend('<li><a id="iscriviti" class="btn btn-success"><i class="fa fa-check"> Iscriviti</a></li>'):$(t).find("#iscriviti").removeClass("btn-danger").addClass("btn-success").html('<i class="fa fa-check"></i> Iscriviti'):$(t).find("#iscriviti")&&$(t).find("#iscriviti").parent().remove())):(t="to"==n.parent().parent().attr("id")?i(n,d,c):i(n,o,c),a($(t).find("#like").html())&&$(t).find(".links").prepend('<li><a id="like" class="btn btn-success"><span id="text"><i class="fa fa-thumbs-o-up"></i></span> <span id="cont">0</span></a></li>')),$(t).find("#stato").removeClass("btn-success").addClass("btn-warning").html('<i class="fa fa-eye-slash"></i> Blocca'),$(t).find("#dis").remove()),$(t).find("#cambia").parent().remove()})}),$(document).on("tap","#cambia",function(){var a=$(this);a.html('<i class="fa fa-circle-o-notch fa-spin"></i>').addClass("disabled"),$.ajax({method:"POST",url:t+"/templates/ajax/cambia.php",data:{id:a.parent().parent().parent().find("#value").text(),page:$("#page").text()}}).done(function(e){var t=a.parent().parent().parent().parent().parent(),n=i(t,d,o);$(n).find("#cambia").parent().remove(),$("#change").text(parseInt($("#change").text())-1)})})});